<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="1aca379a-b67d-460d-9130-0a93d43a7059" activeEnvironment="Default" name="VF-LDB" resourceRoot="" soapui-version="5.4.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="Export JUnit Results" value="true"/>
  <con:entry key="Export All" value="true"/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="TestSuite" value="4.1 Operator creates PORT-IN"/>
  <con:entry key="Endpoint" value=""/>
  <con:entry key="Select Report Type" value=""/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Export JUnit Results with test properties" value="true"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="TestCase" value="Auth"/>
  <con:entry key="Username" value=""/>
  <con:entry key="user-settings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="Root Folder" value="D:\WORK\REPORTS\VF"/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Save Project" value="false"/>
</xml-fragment>]]></con:setting></con:settings><con:interface xsi:type="con:RestService" id="9be22342-733c-488d-a0e8-38523f95fa74" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://192.168.101.53" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://192.168.101.53</con:endpoint></con:endpoints><con:resource name="" path="/uaa/api/account" id="1228d444-da09-4c72-9cbb-f9241885df2d"><con:settings/><con:parameters/><con:method name="GET" id="ed7773ea-a3e8-40d6-b772-f54d49a29afe" method="GET"><con:settings/><con:parameters/><con:request name="GET ACCOUNT info" id="8f3a4081-6191-4ecb-a603-e3b213682cd0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="token" path="/uaa/oauth/token" id="2d475fd7-309c-462a-a86d-f67dcbf1980d"><con:settings/><con:parameters><con:parameter><con:name>Authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>Accept</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>Content-Type</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>username</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>grant_type</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="POST" id="5baa327a-6727-4028-9153-597525c21830" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:tok="http://192.168.101.53/uaa/oauth/token">tok:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="POST AUTH UAA" id="1f4fbe3e-7a2c-4a33-a5d2-c4e4b77ad681" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="Basic aW50ZXJuYWw6aW50ZXJuYWw="/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="grant_type" value="password"/>
  <con:entry key="Content-Type" value="application/x-www-form-urlencoded"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>Accept</con:entry><con:entry>Content-Type</con:entry><con:entry>username</con:entry><con:entry>password</con:entry><con:entry>grant_type</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="mobileNumberLocation" path="/ldb/api/v1/mobileNumberLocation" id="ea60986e-d53a-4a1a-a297-61ef2202763e"><con:settings/><con:parameters/><con:method name="POST" id="83bf9f45-a3a1-4fd8-8ca3-580a36c2907a" method="POST"><con:settings/><con:parameters/><con:request name="Create new mobileNumber" id="578eb837-13bb-48b7-a9fd-ccad07a63d31" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request>{
	"id": null,
	"version": null,
	"msisdn": "${pNumber}",
	"routingNumber": "${rNumber}",
	"location": "${location}",
	"state": null,
	"startDatetime": null,
	"endDatetime": null,
	"isCurrent": null
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="mobileNumberLocation" path="/ldb/api/v1/mobileNumberLocation/{msisdn}" id="62014a76-c87d-4b19-ab86-dbbcba060bbc"><con:settings/><con:parameters><con:parameter><con:name>msisdn</con:name><con:style>TEMPLATE</con:style></con:parameter></con:parameters><con:method name="GET" id="3c630aec-f340-46c8-80c5-e136090f65db" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:mob="http://192.168.101.53/ldb/api/v1/mobileNumberLocation/">mob:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Get created mobileNumber" id="fde0a284-8b17-48fc-889a-9d7a559b8b49" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request/><con:originalUri>http://192.168.101.53/ldb/api/v1/mobileNumberLocation/</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="msisdn" value="${pNumber}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>msisdn</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="mobileNumberLocation" path="/ldb/api/v1/mobileNumberLocation/{msisdn}" id="5a17f9a3-e8bc-4826-9702-6bbdc757ba88"><con:settings/><con:parameters><con:parameter><con:name>msisdn</con:name><con:style>TEMPLATE</con:style></con:parameter></con:parameters><con:method name="DELETE" id="20232f61-4858-402d-9133-4b04c05a99ce" method="DELETE"><con:settings/><con:parameters/><con:request name="Delete created mobileNumber" id="373b63b3-77c9-4df0-83b6-d9f2d340d18d" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="msisdn" value="${pNumber}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>msisdn</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="PORN IN REQUEST from CRM" path="/entity/api/xm-entities" id="ac0982ea-266f-49cc-9540-83b071f10961"><con:settings/><con:parameters/><con:method name="POST" id="1a587bc7-d7c3-458c-bb43-dd7ea5c554e5" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:xm="http://192.168.101.53/entity/api/xm-entities">xm:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>500 400</con:status><con:params/><con:element xmlns:xm="http://192.168.101.53/entity/api/xm-entities">xm:Fault</con:element></con:representation><con:request name="Create PORT IN Request" id="7e44a61f-d5cd-4da7-9623-096e36f13a9e" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request>{
	"key": "9697daa5-b307-49a7-8d9b-4691afbce8f8",
	"typeKey": "BUSINESS-INTERACTION.PORTING-REQUEST.PORTIN",
	"stateKey": "VERIFICATION-STARTED",
	"name": "Test request 2",
	"startDate": null,
	"updateDate": null,
	"endDate": null,
	"description": "",
	"data": {
		"recipientRn": "1",
		"donorRn": "2",
		"partyTypeKey": "INDIVIDUAL",
		"channel": "CRM",
		"numbers": [{
			"msisdn": "380969373220",
			"isMaster": false
		}]
	},
	"removed": false
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="PORT-IN request GET BY PROCESS ID" path="/entity/api/xm-entities/{key}" id="5846c43a-3860-4e42-b359-dca7bb7f6c5e"><con:settings/><con:parameters><con:parameter><con:name>key</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="842d5b20-96f1-40ac-a72c-c11e7a11cb4c" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>500 404</con:status><con:params/><con:element xmlns:xm="http://192.168.101.53/entity/api/xm-entities/">xm:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:xm="http://192.168.101.53/entity/api/xm-entities/">xm:Response</con:element></con:representation><con:request name="GET PORT-IN request by PROCESS ID" id="7a4779a3-ba8c-4228-8d97-6b0088983c86" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request/><con:originalUri>http://192.168.101.53/entity/api/xm-entities/</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="key" value="${#TestSuite#reqProcId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>key</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="CHANGE PORT-IN STATE" path="/entity/api/xm-entities/{requestId}/states/{state}" id="d0897712-1ecf-4ec3-a9b5-a54dfecf50fb"><con:settings/><con:parameters><con:parameter><con:name>requestId</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>state</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="PUT" id="75e7fbe3-b8e5-4f1e-bb95-3d99b58be6a6" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>401 400</con:status><con:params/><con:element xmlns:reg="http://192.168.101.53/entity/api/xm-entities/1094/states/REGISTERED">reg:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:reg="http://192.168.101.53/entity/api/xm-entities/1094/states/REGISTERED">reg:Response</con:element></con:representation><con:request name="CHANGE STATE" id="3d264bc4-11f8-4a23-8ec1-a69b5c541a89" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requestId" value="${#TestSuite#reqId}"/>
  <con:entry key="state" value="REGISTERED"/>
</con:parameters><con:parameterOrder><con:entry>requestId</con:entry><con:entry>state</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="7662fcc2-896b-445a-93ce-c05d5c0aa196" wadlVersion="http://wadl.dev.java.net/2009/02" name="CRM MOCK SERVER" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://192.168.101.53:1080</con:endpoint></con:endpoints><con:resource name="GET CRM REUQEST from LDB" path="/mockserver/retrieve" id="3f02c16a-ebaa-4e29-b9d5-3f8738cb7806"><con:settings/><con:parameters><con:parameter><con:name>type</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>format</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="PUT" id="892affea-c06e-48ba-9333-6272faf06ec4" method="PUT"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="RETRIVE REQUESTS" id="7547b154-492c-48ea-b43f-e64380f9fae1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://192.168.101.53:1080</con:endpoint><con:request>{
	"path": "/crm/api/v1/portingRequest"
	}</con:request><con:originalUri>http://192.168.101.53/mockserver/retrieve</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="format" value="JSON"/>
  <con:entry key="type" value="REQUESTS"/>
</con:parameters><con:parameterOrder><con:entry>type</con:entry><con:entry>format</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="d08014d9-e273-4038-9336-d80a94e5f7af" name="4.1 Operator creates port-in request via CRM"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ede33bd1-36c8-4ec6-b758-005ccd514755" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Pre-Autorun" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Data Generator" id="a4cbfaff-2b8f-45b8-ad42-9403cc393081"><con:settings/><con:config><script>def number = "380930000000"

def newNumber = number.replaceAll(/0000000/){
	def ran = (int)(Math.random()*9999999)
}

testRunner.testCase.testSuite.setPropertyValue("reqPhoneNumber", "${newNumber}")
//log.info(testRunner.testCase.testSuite.setPropertyValue("reqPhoneNumber"))

def name = "New PORT-IN request #0000"

def newName = name.replaceAll(/0000/){
	def ran = (int)(Math.random()*9999)
}

testRunner.testCase.testSuite.setPropertyValue("reqName", "${newName}")
//log.info(testRunner.testCase.testSuite.setPropertyValue("reqName"))
</script></con:config></con:testStep><con:testStep type="restrequest" name="Auth Entity Request" id="417cf8a4-cfdc-4609-a393-55471babf0ec"><con:settings/><con:config service="http://192.168.101.53" resourcePath="/uaa/oauth/token" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Auth Entity Request" id="1f4fbe3e-7a2c-4a33-a5d2-c4e4b77ad681" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request/><con:originalUri>http://192.168.101.53/uaa/oauth/token</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3af4897c-7c85-47e2-ac8b-ddc29a260fc1" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Authorization" value="Basic aW50ZXJuYWw6aW50ZXJuYWw="/>
  <con:entry key="password" value="P@ssw0rd"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="grant_type" value="password"/>
  <con:entry key="Content-Type" value="application/x-www-form-urlencoded"/>
  <con:entry key="username" value="xm"/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>Accept</con:entry><con:entry>Content-Type</con:entry><con:entry>username</con:entry><con:entry>password</con:entry><con:entry>grant_type</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Collect Access data" id="e78076cb-db7d-424c-ba7a-eece25541c15"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>token</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Auth Entity Request</con:sourceStep><con:sourcePath>$.access_token</con:sourcePath><con:targetType>token</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="ad74bf32-0a5d-43a9-b519-676c95af15c8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ENTITY PORT IN REQUEST (REGISTERED)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Create PORT-IN call request" id="ff212713-7fd1-4c24-8ccc-13abf32e5726"><con:settings/><con:config service="http://192.168.101.53" resourcePath="/entity/api/xm-entities" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Create PORT-IN call request" id="7e44a61f-d5cd-4da7-9623-096e36f13a9e" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request>{
	"key": "9697daa5-b307-49a7-8d9b-4691afbce8f8",
	"typeKey": "BUSINESS-INTERACTION.PORTING-REQUEST.PORTIN",
	"stateKey": "VERIFICATION-STARTED",
	"name": "${#TestSuite#reqName}",
	"startDate": null,
	"updateDate": null,
	"endDate": null,
	"description": "",
	"data": {
		"recipientRn": "RECIPIENT",
		"donorRn": "DONOR",
		"partyTypeKey": "INDIVIDUAL",
		"channel": "CRM",
		"numbers": [{
			"msisdn": "${#TestSuite#reqPhoneNumber}",
			"isMaster": false
		}]
	},
	"removed": false
}</con:request><con:originalUri>http://192.168.101.53/entity/api/xm-entities</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cd9831de-6c85-49fa-849e-71df9b82e49d" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="992b65e9-598b-42ab-a86e-1bb24fa9975f" name="JsonPath Match"><con:configuration><path>stateKey</path><content>VERIFICATION-STARTED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Collect data PORT-IN response" id="39755702-cfa9-4de4-a3fb-2b770bf574a6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>get_proc_id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create PORT-IN call request</con:sourceStep><con:sourcePath>$.data.processId</con:sourcePath><con:targetType>reqProcId</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>msisdn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create PORT-IN call request</con:sourceStep><con:sourcePath>$.data.numbers[0].msisdn</con:sourcePath><con:targetType>pNumber</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>entityKeyId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create PORT-IN call request</con:sourceStep><con:sourcePath>$.key</con:sourcePath><con:targetType>entityKeyId</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>reqId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create PORT-IN call request</con:sourceStep><con:sourcePath>$.id</con:sourcePath><con:targetType>reqId</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="CHANGE PORT-IN REQUEST STATE (REGISTERED)" id="b14bd0fd-ae4d-40ca-96c1-aa06c1cdb5a9"><con:settings/><con:config service="http://192.168.101.53" resourcePath="/entity/api/xm-entities/{requestId}/states/{state}" methodName="PUT" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CHANGE PORT-IN REQUEST STATE" id="3d264bc4-11f8-4a23-8ec1-a69b5c541a89" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request/><con:originalUri>http://192.168.101.53/entity/api/xm-entities/1094/states/REGISTERED</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4dd17985-7dff-47c6-a035-c164784dc070" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="24912b4f-cbb9-457a-91f1-f41d99c788cd" name="JsonPath Match"><con:configuration><path>$.stateKey</path><content>REGISTERED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requestId" value="${#TestSuite#reqId}"/>
  <con:entry key="state" value="REGISTERED"/>
</con:parameters><con:parameterOrder><con:entry>requestId</con:entry><con:entry>state</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="RETRIVE REQUESTS" id="15c039f6-b314-43ca-a4eb-37ebf20683c1"><con:settings/><con:config service="CRM MOCK SERVER" resourcePath="/mockserver/retrieve" methodName="PUT" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RETRIVE REQUESTS" id="7547b154-492c-48ea-b43f-e64380f9fae1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://192.168.101.53:1080</con:endpoint><con:request>{
	"path": "/crm/api/v1/portingRequest"
	}</con:request><con:originalUri>http://192.168.101.53/mockserver/retrieve</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="33fca25d-7625-4795-b400-8a394ed55485" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="format" value="JSON"/>
  <con:entry key="type" value="REQUESTS"/>
</con:parameters><con:parameterOrder><con:entry>type</con:entry><con:entry>format</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="ASSERT CRM REQUEST-RESPONSE" id="2dcde446-95ac-47c4-b717-c24329081f5a"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def response = testRunner.testCase.testSteps["RETRIVE REQUESTS"].testRequest.response.responseContent 

def msisdnVar = testRunner.testCase.testSuite.getPropertyValue("reqPhoneNumber")
def procIdVar = testRunner.testCase.testSuite.getPropertyValue("reqProcId")

def result = new groovy.json.JsonSlurper().parseText(response)
.stream()
.filter{ it?.body?.string != null }
.map{it.body.string}
.map{new groovy.json.JsonSlurper().parseText(it)}
.map{it?.data}
.findAll{it.processId == "${procIdVar}"}.first().numbers.first().msisdn

assert result == "${msisdnVar}"

//log.info result

</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="513d9362-a82b-408a-a13b-10414d4ae570" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ENTITY PORT IN REQUEST (VERIFICATION-FAILED)" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Create PORT-IN call request" id="fc949b55-599a-47e1-ba84-ee0d074b2f59"><con:settings/><con:config service="http://192.168.101.53" resourcePath="/entity/api/xm-entities" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Create PORT-IN call request" id="7e44a61f-d5cd-4da7-9623-096e36f13a9e" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request>{
	"key": "9697daa5-b307-49a7-8d9b-4691afbce8f8",
	"typeKey": "BUSINESS-INTERACTION.PORTING-REQUEST.PORTIN",
	"stateKey": "VERIFICATION-STARTED",
	"name": "${#TestSuite#reqName}",
	"startDate": null,
	"updateDate": null,
	"endDate": null,
	"description": "",
	"data": {
		"recipientRn": "RECIPIENT",
		"donorRn": "DONOR",
		"partyTypeKey": "INDIVIDUAL",
		"channel": "CRM",
		"numbers": [{
			"msisdn": "${#TestSuite#reqPhoneNumber}",
			"isMaster": false
		}]
	},
	"removed": false
}</con:request><con:originalUri>http://192.168.101.53/entity/api/xm-entities</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cd9831de-6c85-49fa-849e-71df9b82e49d" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="992b65e9-598b-42ab-a86e-1bb24fa9975f" name="JsonPath Match"><con:configuration><path>stateKey</path><content>VERIFICATION-STARTED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Collect data PORT-IN response" id="60ba952e-5f89-494c-8e3c-ffe94b951541"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>get_proc_id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create PORT-IN call request</con:sourceStep><con:sourcePath>$.data.processId</con:sourcePath><con:targetType>reqProcId</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>msisdn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create PORT-IN call request</con:sourceStep><con:sourcePath>$.data.numbers[0].msisdn</con:sourcePath><con:targetType>pNumber</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>entityKeyId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create PORT-IN call request</con:sourceStep><con:sourcePath>$.key</con:sourcePath><con:targetType>entityKeyId</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>reqId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Create PORT-IN call request</con:sourceStep><con:sourcePath>$.id</con:sourcePath><con:targetType>reqId</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="CHANGE PORT-IN REQUEST STATE (VERIFICATION-FAILED)" id="eb819fa1-c3f5-472c-ba55-f4e58334c33d"><con:settings/><con:config service="http://192.168.101.53" resourcePath="/entity/api/xm-entities/{requestId}/states/{state}" methodName="PUT" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CHANGE PORT-IN REQUEST STATE (REGISTERED)" id="3d264bc4-11f8-4a23-8ec1-a69b5c541a89" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://192.168.101.53</con:endpoint><con:request/><con:originalUri>http://192.168.101.53/entity/api/xm-entities/1094/states/REGISTERED</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4dd17985-7dff-47c6-a035-c164784dc070" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="24912b4f-cbb9-457a-91f1-f41d99c788cd" name="JsonPath Match"><con:configuration><path>$.stateKey</path><content>VERIFICATION-FAILED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requestId" value="${#TestSuite#reqId}"/>
  <con:entry key="state" value="VERIFICATION-FAILED"/>
</con:parameters><con:parameterOrder><con:entry>requestId</con:entry><con:entry>state</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="RETRIVE REQUESTS" id="0acacf15-995a-4511-b9b1-580932ef6ab1"><con:settings/><con:config service="CRM MOCK SERVER" resourcePath="/mockserver/retrieve" methodName="PUT" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RETRIVE REQUESTS" id="7547b154-492c-48ea-b43f-e64380f9fae1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://192.168.101.53:1080</con:endpoint><con:request>{
	"path": "/crm/api/v1/portingRequest"
	}</con:request><con:originalUri>http://192.168.101.53/mockserver/retrieve</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="33fca25d-7625-4795-b400-8a394ed55485" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="format" value="JSON"/>
  <con:entry key="type" value="REQUESTS"/>
</con:parameters><con:parameterOrder><con:entry>type</con:entry><con:entry>format</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="ASSERT CRM REQUEST-RESPONSE" id="e8f23753-f487-440a-a24a-dcceed7e816a"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def tCase = testRunner.testCase.testSuite.testCases["Pre-Autorun"]

def tStep = tCase.testSteps["Data Generator"]

tStep.run(testRunner, context)

def response = testRunner.testCase.testSteps["RETRIVE REQUESTS"].testRequest.response.responseContent 

def msisdnVar = testRunner.testCase.testSuite.getPropertyValue("reqPhoneNumber")
def procIdVar = testRunner.testCase.testSuite.getPropertyValue("reqProcId")

def result = new groovy.json.JsonSlurper().parseText(response)
.stream()
.filter{ it?.body?.string != null }
.map{it.body.string}
.map{new groovy.json.JsonSlurper().parseText(it)}
.map{it?.data}
.findAll{it.processId == "${procIdVar}"}.first().nextState.stateKey

assert result == "VERIFICATION-FAILED"

//log.info result
//log.info msisdnVar
//log.info procIdVar

</script></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>token</con:name><con:value>eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJjcmVhdGVUb2tlblRpbWUiOjE1NDM0MDExNTg1NTQsInVzZXJfbmFtZSI6InhtIiwic2NvcGUiOlsib3BlbmlkIl0sInJvbGVfa2V5IjoiU1VQRVItQURNSU4iLCJ1c2VyX2tleSI6InhtIiwiZXhwIjoxNTQzNDQ0MzU4LCJhZGRpdGlvbmFsRGV0YWlscyI6e30sImxvZ2lucyI6W3sidHlwZUtleSI6IkxPR0lOLkVNQUlMIiwic3RhdGVLZXkiOm51bGwsImxvZ2luIjoieG1AeG0tb25saW5lLmNvbS51YSJ9LHsidHlwZUtleSI6IkxPR0lOLk5JQ0tOQU1FIiwic3RhdGVLZXkiOm51bGwsImxvZ2luIjoieG0ifV0sImF1dGhvcml0aWVzIjpbIlNVUEVSLUFETUlOIl0sImp0aSI6ImExM2QwYWJjLTg2NTYtNDJmMS05MGFmLWMwNWMzODRiZDUxYSIsInRlbmFudCI6IlhNIiwiY2xpZW50X2lkIjoiaW50ZXJuYWwifQ.Wo8LXcj7Z9fc22GwkCGA8BN7RJRC7_nwIzSXz8j5BMzXN_oFpf3T3UgdMdrgCzosu4GgAgglXPC68bTowv4SQ2HQvVZkCXcWXpf-SPYNJJoHHjTpvI7zMbggyXCIQvYpqc6HNx61nxPtei2U3LiVAc4jiwCogWdXkwqOYQ1y4o8LLknjTEo73OWGfkbvpNECQjhoh2Do6ru-7IqbCdqvlpkpid1X3VUf31Tw_N-Ux0EibZDQ8MkAn_cTM6iE4Yx1HYi7MTtDnufP2MS9562DlOE9QZhFXEudrZmcVoCQKdMfuP25qm-d_d60ZGnZXUMTrMNpM9yHKfzUksWh8EKK7g</con:value></con:property><con:property><con:name>pNumber</con:name><con:value>38093705077</con:value></con:property><con:property><con:name>rNumber</con:name><con:value/></con:property><con:property><con:name>location</con:name><con:value/></con:property><con:property><con:name>reqProcId</con:name><con:value>b54562e4-3b90-465a-a189-2043d3ab9a76</con:value></con:property><con:property><con:name>reqName</con:name><con:value>New PORT-IN request #9660</con:value></con:property><con:property><con:name>reqPhoneNumber</con:name><con:value>38093705077</con:value></con:property><con:property><con:name>entityKeyId</con:name><con:value>9697daa5-b307-49a7-8d9b-4691afbce8f8</con:value></con:property><con:property><con:name>reqId</con:name><con:value>1101</con:value></con:property></con:properties></con:testSuite><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>